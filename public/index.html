<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Publitas Front-end Code Challenge</title>
    <script type="module" crossorigin>var l=Object.defineProperty;var d=(i,t,e)=>t in i?l(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var o=(i,t,e)=>d(i,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();const u=(i,t,e,s)=>{if(i<e&&t<s)return{width:i,height:t};const n=e/i,a=s/t,r=Math.min(n,a);return{width:Math.round(i*r),height:Math.round(t*r)}},f=(i,t,e,s,n)=>{const a=s*e,r=s/2-i/2+a,c=n/2-t/2;return{x:r,y:c}};class g{constructor(t,e){o(this,"canvas");o(this,"context");o(this,"imagesSources");o(this,"images");o(this,"startX");o(this,"state");o(this,"currentTranslateX");o(this,"previousTranslateX");o(this,"handleMouseDown",t=>{this.state="dragging";const e=this.canvas;e.style.cursor="grabbing";const s=t.type==="mousedown"?t.clientX:t.touches[0].clientX;this.startX=s-e.getBoundingClientRect().left});var s;this.canvas=t,this.context=(s=this.canvas)==null?void 0:s.getContext("2d"),this.state="idle",this.imagesSources=e,this.images=[],this.startX=0,this.currentTranslateX=0,this.previousTranslateX=0}loadImage(t){return new Promise((e,s)=>{const n=new Image;n.src=t,n.onload=()=>e(n),n.onerror=()=>s(new Error(`Failed to load image: ${t}`))})}async setImages(){const t=this.imagesSources.map(s=>this.loadImage(s)),e=await Promise.all(t);this.images=e}drawImages(){const t=this.canvas,e=this.context;!e||!t||this.images.forEach((s,n)=>{const{width:a,height:r}=u(s.width,s.height,t.width,t.height),{x:c,y:h}=f(a,r,n,t.width,t.height);e==null||e.drawImage(s,c,h,a,r)})}draw(t=0){const e=this.canvas,s=this.context;!s||!e||(s.clearRect(0,0,e.width,e.height),s.fillStyle="#000",s.fillRect(0,0,e.width,e.height),s.save(),s.translate(t,0),this.drawImages(),s.restore())}handleMouseUp(){this.state="idle",this.canvas.style.cursor="grab",this.previousTranslateX=this.currentTranslateX}get maxTranslateX(){return-1*(this.images.length*this.canvas.width-this.canvas.width)}handleMouseMove(t){if(this.state!=="dragging")return;const e=this.canvas,s=t.type==="mousemove"?t.clientX:t.touches[0].clientX;this.currentTranslateX=s-this.startX-e.getBoundingClientRect().left+this.previousTranslateX,this.currentTranslateX>0&&(this.currentTranslateX=0),this.currentTranslateX<this.maxTranslateX&&(this.currentTranslateX=this.maxTranslateX),this.draw(this.currentTranslateX)}async initialize(){if(await this.setImages(),!this.canvas)throw new Error("Failed to find canvas element!");const t=this.canvas;t.style.cursor="grab",t.addEventListener("mousedown",this.handleMouseDown.bind(this)),window.addEventListener("mousemove",this.handleMouseMove.bind(this)),window.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("touchstart",this.handleMouseDown.bind(this)),window.addEventListener("touchmove",this.handleMouseMove.bind(this)),window.addEventListener("touchend",this.handleMouseUp.bind(this)),this.draw()}}const m=["https://placehold.jp/ff0000/ffffff/640x400.png?text=Image%201","https://placehold.jp/00ff00/ffffff/740x500.png?text=Image%202","https://placehold.jp/0000ff/ffffff/400x640.png?text=Image%203","https://placehold.jp/ffa500/ffffff/340x340.png?text=Image%204"];window.addEventListener("load",()=>{const i=document.querySelector("#carousel");new g(i,m).initialize()});</script>
    <style rel="stylesheet" crossorigin>:root{font-family:system-ui,Avenir,Helvetica,Arial,sans-serif;line-height:1.5;font-weight:400;color-scheme:light dark;color:#ffffffde;background-color:#242424;font-synthesis:none;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}*{box-sizing:border-box}html,body{min-width:100%;min-height:100%}body{margin:0;padding:0}main{display:flex;flex-direction:column;place-items:center}h1{font-size:3.2em;line-height:1.1}#carousel{width:600px;height:400px;border:1px solid #212121}@media screen and (max-width: 768px){body{padding:40px}#carousel{width:100%;max-width:100%;height:auto}}@media (prefers-color-scheme: light){:root{color:#213547;background-color:#fff}}</style>
  </head>
  <body>
    <main>
      <h1>Publitas Front-end Code Challenge</h1>
      <canvas id="carousel" width="640" height="400"></canvas>
      <p>Drag to change image</p>
    </main>
  </body>
</html>
